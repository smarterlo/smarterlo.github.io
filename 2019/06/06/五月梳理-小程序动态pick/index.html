<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="写博客是为了防止重复工作"><meta name="keywords" content="小左,小程序,前端"><title>五月梳理-小程序动态pick | 小左的博客</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">五月梳理-小程序动态pick</h1><a id="logo" href="/.">小左的博客</a><p class="description">写博客是为了防止重复工作</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-rss"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">五月梳理-小程序动态pick</h1><div class="post-meta"><a href="/2019/06/06/五月梳理-小程序动态pick/#comments" class="comment-count"></a><p><span class="date">Jun 06, 2019</span><span><a href="/categories/微信小程序/" class="category">微信小程序</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>小程序整理–如何动态添加picker</p>
<a id="more"></a>
<p><img src="https://zuoblog.oss-cn-hangzhou.aliyuncs.com/Addpicker.gif" alt="默认picker"><br>最近在做一个计算颇为复杂的小程序，从上图可以看到，实现了动态增删picker，并且每次的值都有获取和判断。</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>用一个数组。for循环显示，并在view上 data-ind  绑定索引，在点击事件时候，获取索引，对其增删改。（这里是自带的时间picker 所以不用判断 range里的数组变化。下面会有例子说明，其实原理一样。）</p>
<h4 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h4><p>js数据      medicalItem: [{date1:‘请选择’, date2: ‘请选择’ }]  for循环，date1 date2为入院时间和出院时间<br>方法addMedical 添加数据，每次判断数组最后一条数据的date1 、date2 是否为“请选择”，即可判断是否已经选择时间。<br>bindDate 为picker的绑定事件，通过e.currentTarget.dataset.ind来获取数组的序列，data-filed 来获取是哪个字段 给对应的数组下标中的某个字段赋值。<br>OK！一切都明白了。以下就是代码部分。</p>
<h4 id="wxml-代码如下"><a href="#wxml-代码如下" class="headerlink" title="wxml 代码如下:"></a>wxml 代码如下:</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;medicalItem&#125;&#125;"</span> <span class="attr">wx:key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input  margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>入院时间<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'date'</span> <span class="attr">bindchange</span>=<span class="string">"bindDate"</span> <span class="attr">data-index</span>=<span class="string">"&#123;&#123;index&#125;&#125;"</span> <span class="attr">data-filed</span>=<span class="string">'date1'</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;item.date1&#125;&#125;"</span> <span class="attr">start</span>=<span class="string">"1995-10-25"</span> <span class="attr">end</span>=<span class="string">"&#123;&#123;toDay&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">'text-gray width-sm'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'flex justify-between'</span>&gt;</span></span><br><span class="line">        &#123;&#123;item.date1&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-green text-xxl'</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;index!=0&#125;&#125;"</span> <span class="attr">bindtap</span>=<span class="string">'closeMedical'</span> <span class="attr">data-index</span>=<span class="string">'&#123;&#123;index&#125;&#125;'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-roundclose'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-red text-xxl'</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;index==0&#125;&#125;"</span> <span class="attr">style</span>=<span class="string">'visibility:hidden'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-question'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input  margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>出院时间<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'date'</span> <span class="attr">bindchange</span>=<span class="string">"bindDate"</span> <span class="attr">data-index</span>=<span class="string">"&#123;&#123;index&#125;&#125;"</span> <span class="attr">data-filed</span>=<span class="string">'date2'</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;item.date2&#125;&#125;"</span> <span class="attr">start</span>=<span class="string">"1995-10-25"</span> <span class="attr">end</span>=<span class="string">"&#123;&#123;toDay&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">'text-gray width-sm'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'flex justify-between'</span>&gt;</span></span><br><span class="line">        &#123;&#123;item.date2&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-red text-xxl'</span> <span class="attr">style</span>=<span class="string">'visibility:hidden'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-question'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>医嘱休息天数<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">'width-sm'</span> <span class="attr">placeholder</span>=<span class="string">'请输入...'</span> <span class="attr">focus</span>=<span class="string">"&#123;&#123;false&#125;&#125;"</span> <span class="attr">data-ind</span>=<span class="string">'&#123;&#123;index&#125;&#125;'</span> <span class="attr">bindinput</span>=<span class="string">'zyInput'</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">maxlength</span>=<span class="string">"300"</span> <span class="attr">cursor-spacing</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-red text-xxl'</span> <span class="attr">style</span>=<span class="string">'visibility:hidden'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-question'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar text-blue  input margin-lr-sm flex justify-between "</span> <span class="attr">bindtap</span>=<span class="string">'addMedical'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-sm "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-blue"</span>&gt;</span>添加更多住院<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-roundadd'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="js-代码如下"><a href="#js-代码如下" class="headerlink" title="js 代码如下:"></a>js 代码如下:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">   <span class="comment">//医疗</span></span><br><span class="line">    medicalItem: [&#123;</span><br><span class="line">      date1: <span class="string">'请选择'</span>,</span><br><span class="line">      date2: <span class="string">'请选择'</span></span><br><span class="line">    &#125;],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 添加更多住院</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  addMedical() &#123;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.medicalItem;</span><br><span class="line">    <span class="keyword">if</span> (item[item.length - <span class="number">1</span>].date1 == <span class="string">'请选择'</span> || item[item.length - <span class="number">1</span>].date2 == <span class="string">'请选择'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        modalContent: <span class="string">'请填写完整上次入院时间!'</span>,</span><br><span class="line">        modal: <span class="literal">true</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      item[item.length] = &#123;</span><br><span class="line">        date1: <span class="string">'请选择'</span>,</span><br><span class="line">        date2: <span class="string">'请选择'</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        medicalItem: item</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  closeMedical(e) &#123;</span><br><span class="line">    <span class="keyword">let</span> ind = e.currentTarget.dataset.index;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.medicalItem;</span><br><span class="line">    item.splice(ind, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      medicalItem: item</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  bindDate(e) &#123;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.medicalItem;</span><br><span class="line">    <span class="keyword">let</span> day = <span class="number">0</span>;</span><br><span class="line">    item[e.currentTarget.dataset.index][e.currentTarget.dataset.filed] = e.detail.value;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      medicalItem: item,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://zuoblog.oss-cn-hangzhou.aliyuncs.com/Addpicker2.gif" alt="自定义picker"></p>
<p>这个就比上个复杂了很多计算， 这我项目中才用到的，我这里就不说明了，我就来说明一下如何实现自定义的picker数据的时候动态添加，获取值用来计算。</p>
<h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><p>用一个数组。for循环显示，并在view上 data-ind  绑定索引，在点击事件时候，获取索引，对其增删改。思路是没变，但是过程变了。这里我要循环的不是数据了，而是我要picker里的多列里的下标。</p>
<h4 id="过程-1"><a href="#过程-1" class="headerlink" title="过程"></a>过程</h4><p>js数据         //定残 disableArry: [  [‘一级’, ‘二级’, ‘三级’, ‘四级’, ‘五级’, ‘六级’, ‘七级’, ‘八级’, ‘九级’, ‘十级’],  [‘1处’, ‘2处’, ‘3处’, ‘4处’, ‘5处’, ‘6处’, ‘7处’, ‘8处’, ‘9处’, ‘10处’, ]  ],<br>                 disableIndex: [[0, 0]],<br>picker 里range里的数组是disableArry;  但是我for循环的是disableIndex，disableIndex:里是一个数组，每个元素为对应的picker 中range的下标。<br>依旧是data-index里存放索引，多列bindchange里是获取一个数组，格式就是[第一列的index，第二列的index]。添加到disableIndex:里。</p>
<p>OK！多说无益思路大同小异。以下就是代码部分。可以忽略我计算的相关代码。理解如何动态添加和获取就可以了。</p>
<h4 id="wxml-代码如下-1"><a href="#wxml-代码如下-1" class="headerlink" title="wxml 代码如下:"></a>wxml 代码如下:</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'text-sm margin-sm text-gray '</span>&gt;</span></span><br><span class="line">      定残情况</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input  margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>定残时间<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'date'</span> <span class="attr">bindchange</span>=<span class="string">"binddisabledate"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;disabledate&#125;&#125;"</span> <span class="attr">start</span>=<span class="string">"1995-10-25"</span> <span class="attr">end</span>=<span class="string">"&#123;&#123;toDay&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">'text-gray width-sm'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'flex justify-between'</span>&gt;</span></span><br><span class="line">          &#123;&#123;disabledate&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'text-red text-xxl'</span> <span class="attr">bindtap</span>=<span class="string">'showModal'</span> <span class="attr">data-ind</span>=<span class="string">'11'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-question'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;disableIndex&#125;&#125;"</span> <span class="attr">wx:key</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input  margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>伤残等级<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">"multiSelector"</span> <span class="attr">data-index</span>=<span class="string">"&#123;&#123;index&#125;&#125;"</span> <span class="attr">bindchange</span>=<span class="string">"bindMultiPickerChange"</span> <span class="attr">bindcolumnchange</span>=<span class="string">"bindMultiPickerColumnChange"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;item&#125;&#125;"</span> <span class="attr">range</span>=<span class="string">"&#123;&#123;disableArry&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">'text-gray width-sm'</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'flex justify-between'</span>&gt;</span></span><br><span class="line">            &#123;&#123;disableArry[0][item[0]]&#125;&#125;，&#123;&#123;disableArry[1][item[1]]&#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-green text-xxl'</span> <span class="attr">style</span>=<span class="string">'visibility:&#123;&#123;index==0?"hidden":"visible"&#125;&#125;'</span> <span class="attr">bindtap</span>=<span class="string">'closeDisable'</span> <span class="attr">data-index</span>=<span class="string">'&#123;&#123;index&#125;&#125;'</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-roundclose'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar  input margin-lr-sm solid-bottom "</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-xs "</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-black"</span>&gt;</span>赔偿指数<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">'width-sm text-gray'</span> <span class="attr">disabled</span>=<span class="string">'&#123;&#123;true&#125;&#125;'</span> <span class="attr">value</span>=<span class="string">'&#123;&#123;constParam.disable.text&#125;&#125;'</span> <span class="attr">focus</span>=<span class="string">"&#123;&#123;false&#125;&#125;"</span> <span class="attr">maxlength</span>=<span class="string">"300"</span> <span class="attr">cursor-spacing</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">' text-red text-xxl'</span> <span class="attr">bindtap</span>=<span class="string">'showModal'</span> <span class="attr">data-ind</span>=<span class="string">'12'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-question'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"cu-bar text-blue  input margin-lr-sm flex justify-between "</span> <span class="attr">bindtap</span>=<span class="string">'addDisable'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"action width-sm "</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"text-blue"</span>&gt;</span>添加更多伤残<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'icon-roundadd'</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="js-代码如下-disableCount为我计算函数。可以忽略不看。"><a href="#js-代码如下-disableCount为我计算函数。可以忽略不看。" class="headerlink" title="js 代码如下:  disableCount为我计算函数。可以忽略不看。"></a>js 代码如下:  disableCount为我计算函数。可以忽略不看。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">   <span class="comment">//定残</span></span><br><span class="line">    disableArry: [</span><br><span class="line">      [<span class="string">'一级'</span>, <span class="string">'二级'</span>, <span class="string">'三级'</span>, <span class="string">'四级'</span>, <span class="string">'五级'</span>, <span class="string">'六级'</span>, <span class="string">'七级'</span>, <span class="string">'八级'</span>, <span class="string">'九级'</span>, <span class="string">'十级'</span>],</span><br><span class="line">      [<span class="string">'1处'</span>, <span class="string">'2处'</span>, <span class="string">'3处'</span>, <span class="string">'4处'</span>, <span class="string">'5处'</span>, <span class="string">'6处'</span>, <span class="string">'7处'</span>, <span class="string">'8处'</span>, <span class="string">'9处'</span>, <span class="string">'10处'</span>, ]</span><br><span class="line">    ],</span><br><span class="line">    disableIndex: [</span><br><span class="line">      [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//多列伤残</span></span><br><span class="line">  bindMultiPickerChange: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.disableIndex;</span><br><span class="line">    item[e.currentTarget.dataset.index] = e.detail.value;</span><br><span class="line">    <span class="comment">//计算</span></span><br><span class="line">    <span class="keyword">this</span>.disableCount(item);</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//添加伤残</span></span><br><span class="line">  addDisable: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.disableIndex;</span><br><span class="line">    item[item.length] = [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      disableIndex: item,</span><br><span class="line">      <span class="string">"constParam.disable"</span>: &#123;</span><br><span class="line">        text: <span class="string">'100%'</span>,</span><br><span class="line">        value: <span class="number">1</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  closeDisable: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">this</span>.data.disableIndex;</span><br><span class="line">    item.splice(e.currentTarget.dataset.index, <span class="number">1</span>);</span><br><span class="line">     <span class="comment">//计算</span></span><br><span class="line">    <span class="keyword">this</span>.disableCount(item);</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>好了。以上就是我最近做的比较复杂的一个picker的动态添加获取。</p>
<blockquote>
<p>有了思路和想法去做，一切都会变的简单了。</p>
</blockquote>
</div><div class="post-copyright"><blockquote><p>原文作者: 小左</p><p>原文链接: <a href="https://zuobb.cn/2019/06/06/五月梳理-小程序动态pick/">https://zuobb.cn/2019/06/06/五月梳理-小程序动态pick/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/小程序/">小程序</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/07/22/六月知识整理-小程序云开发/" class="pre">六月知识整理-小程序云开发</a><a href="/2019/05/10/我的第一篇博客/" class="next">我的第一篇博客</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NDE0NS8yMDY3OQ=="></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#思路"><span class="toc-text">思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#过程"><span class="toc-text">过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wxml-代码如下"><span class="toc-text">wxml 代码如下:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js-代码如下"><span class="toc-text">js 代码如下:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#思路-1"><span class="toc-text">思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#过程-1"><span class="toc-text">过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wxml-代码如下-1"><span class="toc-text">wxml 代码如下:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js-代码如下-disableCount为我计算函数。可以忽略不看。"><span class="toc-text">js 代码如下:  disableCount为我计算函数。可以忽略不看。</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/01/29/koa + mysql/">koa2 + mysql</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/22/uniCloud云开发-订阅消息/">uniCloud云开发--订阅消息</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/20/2020-07-20/">iframe动态创建与内存释放</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/06/8月整理-vue-el基础知识回顾/">8月整理-vue+el基础知识回顾</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/13/七月整理-vue数据绑定原理/">七月整理-vue数据绑定原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/22/六月知识整理-小程序云开发/">六月知识整理-小程序云开发</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/06/五月梳理-小程序动态pick/">五月梳理-小程序动态pick</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/10/我的第一篇博客/">我的第一篇博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/09/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iframe/">-iframe</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/博客工具/">博客工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信小程序/">微信小程序</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资源网址/">资源网址</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Md编辑工具/" style="font-size: 15px;">Md编辑工具</a> <a href="/tags/Editor/" style="font-size: 15px;">Editor</a> <a href="/tags/小程序/" style="font-size: 15px;">小程序</a> <a href="/tags/云开发/" style="font-size: 15px;">云开发</a> <a href="/tags/资源/" style="font-size: 15px;">资源</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/iframe/" style="font-size: 15px;">-iframe</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/koa2/" style="font-size: 15px;">koa2</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/vue数据绑定原理/" style="font-size: 15px;">vue数据绑定原理</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://pengxiao1012.cn/" title="pengxiao" target="_blank">pengxiao</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">小左.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body></html>