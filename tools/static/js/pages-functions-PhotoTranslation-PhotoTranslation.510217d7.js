(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-functions-PhotoTranslation-PhotoTranslation"],{"2f27":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"uni-button[data-v-48c4b0c4]{-webkit-border-radius:0;border-radius:0}uni-button[data-v-48c4b0c4]::after{border:none}",""]),t.exports=e},"481f":function(t,e,n){var o=n("2f27");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("4f06").default;a("3d5a4606",o,!0,{sourceMap:!1,shadowMode:!1})},"9ec0":function(t,e,n){"use strict";var o=n("481f"),a=n.n(o);a.a},cc3a:function(t,e,n){"use strict";n.r(e);var o=n("ddff"),a=n("e199");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("9ec0");var c,r=n("f0c5"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"48c4b0c4",null,!1,o["a"],c);e["default"]=s.exports},ddff:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"action",staticStyle:{"text-align":"center"}},[n("v-uni-view",[t._v("识别结果")])],1),n("v-uni-view",{staticClass:"action"},[t.textres?n("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{"data-target":"Modal"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copy()}}},[t._v("复制")]):t._e()],1)],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-textarea",{attrs:{"auto-height":!0,maxlength:"-1",placeholder:"温馨提示:裁剪时选择文字区域识别更准确哦!"},model:{value:t.textres,callback:function(e){t.textres=e},expression:"textres"}})],1),n("v-uni-view",{staticClass:"padding flex flex-direction bg-white top"},[n("v-uni-button",{staticClass:"cu-btn  bg-blue margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[t._v("选择图片")])],1),n("v-uni-view",[n("image-cropper",{attrs:{src:t.tempFilePath},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}})],1)],1)},i=[]},e199:function(t,e,n){"use strict";n.r(e);var o=n("f253"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},f253:function(t,e,n){"use strict";var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i=o(n("b69c")),c={onLoad:function(){switch(a=this,a.$store.state.platform){case"android":console.log("运行Android上"),Vue.prototype.requestAndroidPermission("android.permission.CAMERA");break;case"ios":Vue.prototype.requestIosPermission("camera","摄像头"),Vue.prototype.requestIosPermission("photoLibrary","相册"),console.log("运行iOS上");break;default:console.log("运行在开发者工具上");break}},components:{ImageCropper:i.default},data:function(){return{textres:"",tempFilePath:"",cropFilePath:""}},methods:{copy:function(){uni.setClipboardData({data:a.textres})},upload:function(){uni.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){console.log("用户确定"),a.tempFilePath=t.tempFilePaths.shift()}})},confirm:function(t){console.log("用户确定"),a.tempFilePath="",a.cropFilePath=t.detail.tempFilePath,uni.showLoading({title:"识别中"}),console.log(a.domain);var e=a.cropFilePath;console.log("识别路径"+e),a.xhttp.upload("/functions/Ocr/textOcr",{filePath:e,name:"img",header:{"content-type":"multipart/form-data"}}).then((function(t){console.log(t),0==t.data.code&&(a.textres=t.data.data,""==a.textres&&plus.nativeUI.alert("没有识别到文字",(function(){}),"提示","好的")),uni.hideLoading()})).catch((function(t){uni.hideLoading()}))},cancel:function(){console.log("canceled")}}};e.default=c}}]);