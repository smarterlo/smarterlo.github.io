(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-functions-WipeWatermark-WipeWatermark"],{"04b7":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-progress",style:{borderRadius:e.round?"100rpx":0,height:e.height+"rpx",backgroundColor:e.inactiveColor}},[n("v-uni-view",{staticClass:"u-active",class:[e.type?"u-type-"+e.type+"-bg":"",e.striped?"u-striped":"",e.striped&&e.stripedActive?"u-striped-active":""],style:[e.progressStyle]},[e.$slots.default||e.$slots.$default?e._t("default"):e.showPercent?[e._v(e._s(e.percent+"%"))]:e._e()],2)],1)},i=[]},"141e":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.u-progress[data-v-6ee601eb]{overflow:hidden;height:15px;display:inline-flex;align-items:center;width:100%;border-radius:%?100?%}.u-active[data-v-6ee601eb]{width:0;height:100%;align-items:center;display:flex;flex-direction:row;justify-items:flex-end;justify-content:space-around;font-size:%?20?%;color:#fff;transition:all .4s ease}.u-striped[data-v-6ee601eb]{background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-size:39px 39px}.u-striped-active[data-v-6ee601eb]{-webkit-animation:progress-stripes-data-v-6ee601eb 2s linear infinite;animation:progress-stripes-data-v-6ee601eb 2s linear infinite}@-webkit-keyframes progress-stripes-data-v-6ee601eb{0%{background-position:0 0}100%{background-position:39px 0}}@keyframes progress-stripes-data-v-6ee601eb{0%{background-position:0 0}100%{background-position:39px 0}}',""]),e.exports=t},"32b3":function(e,t,n){"use strict";var o=n("37e86"),i=n.n(o);i.a},"37e86":function(e,t,n){var o=n("141e");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("1443ffae",o,!0,{sourceMap:!1,shadowMode:!1})},"4e52":function(e,t,n){"use strict";n.r(t);var o=n("9317"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"6f5c":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var o={name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:function(){return{}},computed:{progressStyle:function(){var e={};return e.width=this.percent+"%",this.activeColor&&(e.backgroundColor=this.activeColor),e}},methods:{}};t.default=o},8951:function(e,t,n){"use strict";n.r(t);var o=n("04b7"),i=n("93e6");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("32b3");var r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"6ee601eb",null,!1,o["a"],void 0);t["default"]=s.exports},9317:function(e,t,n){"use strict";var o,i;n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c975");var a={onHide:function(){},onUnload:function(){o.clear()},onLoad:function(){switch(o=this,o.$store.state.platform){case"android":console.log("运行Android上");break;case"ios":Vue.prototype.requestIosPermission("photoLibrary","相册"),console.log("运行iOS上");break;default:console.log("运行在开发者工具上");break}},onShow:function(){uni.getClipboardData({success:function(e){var t=e.data;-1!=t.indexOf("http")&&uni.showModal({title:"提示",content:"检测到链接!是否粘贴并预览?",success:function(e){e.confirm?(o.url=t,o.play()):e.cancel&&console.log("用户点击取消")}})}})},data:function(){return{url:"",downV:!1,playUrl:"",pro:0}},methods:{save:function(){o.clear(),console.log("开始"),i=uni.downloadFile({url:o.playUrl,success:function(e){if(200===e.statusCode){var t=e.tempFilePath;switch(console.log(t),console.log(e),console.log("下载成功"),uni.getSystemInfoSync().platform){case"android":plus.io.resolveLocalFileSystemURL("_doc",(function(e){console.log("获取目录对象成功");var n=e,o=Date.parse(new Date);plus.io.resolveLocalFileSystemURL(t,(function(e){e.copyTo(n,o+".mp4",(function(e){t="_doc/"+o+".mp4",console.log(t),uni.saveVideoToPhotosAlbum({filePath:t,success:function(){uni.showToast({title:"保存成功",duration:2e3})},fail:function(){uni.showToast({icon:"none",title:"保存失败",duration:2e3})}}),console.log("移动文件成功")}),(function(e){console.log("移动文件失败")}))}),(function(e){}))}),(function(e){console.log("获取目录对象失败")}));break;case"ios":console.log(t),uni.saveVideoToPhotosAlbum({filePath:t,success:function(){uni.showToast({title:"保存成功",duration:2e3})},fail:function(e){console.log(e),uni.showToast({icon:"none",title:"保存失败",duration:2e3})}}),console.log("运行iOS上");break;default:console.log("运行在开发者工具上");break}}else plus.nativeUI.alert("下载失败!请检查网络或链接!",(function(){}),"提示","好的")}}),i.onProgressUpdate((function(e){o.pro=e.progress}))},play:function(){o.pro=0,uni.showLoading({title:"加载中"}),o.xhttp.request({url:"/functions/WipeWatermark/exec",method:"POST",data:{url:o.url,platform:o.$store.state.platform},header:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e),0==e.data.code&&(o.playUrl=e.data.data),uni.hideLoading()})).catch((function(e){uni.hideLoading()}))},videoErrorCallback:function(){console.log("播放失败"),plus.nativeUI.alert("播放失败!请检查视频链接是否正确!您可以尝试保存至相册",(function(){}),"提示","好的")},clear:function(){i&&i.abort()}}};t.default=a},"93e6":function(e,t,n){"use strict";n.r(t);var o=n("6f5c"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},dec6:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uLineProgress:n("8951").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom"},[n("v-uni-view",{staticClass:"action"},[n("v-uni-text",{staticClass:"cuIcon-title text-blue"}),e._v("请输入视频链接")],1)],1),n("v-uni-view",{staticClass:"cu-form-group ",staticStyle:{margin:"20rpx 20rpx"}},[n("v-uni-textarea",{attrs:{"auto-height":!0,maxlength:"-1",placeholder:"请输入视频链接"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),e.playUrl?n("v-uni-view",[n("v-uni-video",{staticStyle:{width:"100%"},attrs:{id:"myVideo",src:e.playUrl,autoplay:!0,controls:!0},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.videoErrorCallback.apply(void 0,arguments)}}})],1):e._e(),e.url?n("v-uni-view",{staticClass:"padding flex flex-direction bg-white top"},[e.pro?n("u-line-progress",{attrs:{"active-color":"#2979ff",percent:e.pro}}):e._e(),n("v-uni-button",{staticClass:"cu-btn  bg-blue margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.play()}}},[e._v("预览")]),e.playUrl?n("v-uni-button",{staticClass:"cu-btn bg-green margin-tb-sm lg ",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save()}}},[e._v("保存至相册")]):e._e()],1):e._e()],1)},a=[]},e69c:function(e,t,n){"use strict";n.r(t);var o=n("dec6"),i=n("4e52");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"6e9eb7c8",null,!1,o["a"],void 0);t["default"]=s.exports}}]);