(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-functions-phoneSign-phoneSign"],{"0cea":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"handBtn"},[n("v-uni-image",{class:["black"===t.selectColor?"color_select":"","black-select"],attrs:{src:"black"===t.selectColor?"/static/images/phoneSign/color_black_selected.png":"/static/images/phoneSign/color_black.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectColorEvent("black","#1A1A1A")}}}),n("v-uni-image",{class:["red"===t.selectColor?"color_select":"","black-select"],attrs:{src:"red"===t.selectColor?"/static/images/phoneSign/color_red_selected.png":"/static/images/phoneSign/color_red.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectColorEvent("red","#ca262a")}}}),n("v-uni-button",{staticClass:"delBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.retDraw.apply(void 0,arguments)}}},[t._v("重写")]),n("v-uni-button",{staticClass:"saveBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveCanvasAsImg.apply(void 0,arguments)}}},[t._v("保存")]),n("v-uni-button",{staticClass:"previewBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewCanvasImg.apply(void 0,arguments)}}},[t._v("预览")]),n("v-uni-button",{staticClass:"subBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.subCanvas.apply(void 0,arguments)}}},[t._v("完成")])],1),n("v-uni-view",{staticClass:"handCenter"},[n("v-uni-canvas",{staticClass:"handWriting",attrs:{"disable-scroll":!0,"canvas-id":"handWriting"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadScaleStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadScaleMove.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"handRight"},[n("v-uni-view",{staticClass:"handTitle"},[t._v("请签名")])],1)],1)],1)},o=[]},"29ad":function(t,e,n){"use strict";n.r(e);var a=n("0cea"),i=n("d739");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("f8b9");var s,c=n("f0c5"),l=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"6ad55278",null,!1,a["a"],s);e["default"]=l.exports},3949:function(t,e,n){"use strict";var a;n("cb29"),n("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{canvasName:"handWriting",ctx:"",startX:null,startY:null,canvasWidth:0,canvasHeight:0,selectColor:"black",lineColor:"#1A1A1A",lineSize:5}},onLoad:function(){switch(a=this,a.$store.state.platform){case"android":console.log("运行Android上");break;case"ios":Vue.prototype.requestIosPermission("photoLibrary","相册"),console.log("运行iOS上");break;default:console.log("运行在开发者工具上");break}},onReady:function(){var t=this;this.ctx=uni.createCanvasContext("handWriting"),uni.createSelectorQuery().select(".handCenter").boundingClientRect((function(e){t.canvasWidth=e.width,t.canvasHeight=e.height,t.setCanvasBg("#fff")})).exec()},methods:{uploadScaleStart:function(t){this.startX=t.changedTouches[0].x,this.startY=t.changedTouches[0].y,this.ctx.setStrokeStyle(this.lineColor),this.ctx.setLineWidth(this.lineSize),this.ctx.setLineCap("round"),this.ctx.beginPath()},uploadScaleMove:function(t){var e=t.changedTouches[0].x,n=t.changedTouches[0].y;this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(e,n),this.ctx.stroke(),this.startX=e,this.startY=n,this.ctx.draw(!0)},retDraw:function(){this.ctx.clearRect(0,0,700,730),this.ctx.draw(),this.setCanvasBg("#fff")},selectColorEvent:function(t,e){this.selectColor=t,this.lineColor=e},subCanvas:function(){this.ctx.draw(!0,(function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){uni.showToast({title:"已保存"}),uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){uni.showToast({title:"保存完毕",duration:2e3})}})}})}))},saveCanvasAsImg:function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){console.log(t.tempFilePath,"canvas生成图片地址"),uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){uni.showToast({title:"已保存到相册",duration:2e3})}})}})},previewCanvasImg:function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"jpg",quality:1,success:function(t){uni.previewImage({urls:[t.tempFilePath]})}})},setCanvasBg:function(t){this.ctx.rect(0,0,this.canvasWidth,this.canvasHeight-4),this.ctx.setFillStyle(t),this.ctx.fill(),this.ctx.draw()}}};e.default=i},"599d":function(t,e,n){var a=n("fa12");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("f89b66b6",a,!0,{sourceMap:!1,shadowMode:!1})},cb29:function(t,e,n){var a=n("23e7"),i=n("81d5"),o=n("44d2");a({target:"Array",proto:!0},{fill:i}),o("fill")},d739:function(t,e,n){"use strict";n.r(e);var a=n("3949"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},f8b9:function(t,e,n){"use strict";var a=n("599d"),i=n.n(a);i.a},fa12:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-6ad55278]{background:#fbfbfb;height:auto;overflow:hidden}.wrapper[data-v-6ad55278]{width:100%;height:95vh;margin:%?30?% 0;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:center;align-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%}.handWriting[data-v-6ad55278]{background:#fff;width:100%;height:95vh}.handRight[data-v-6ad55278]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.handCenter[data-v-6ad55278]{border:%?4?% dashed #e9e9e9;-webkit-box-flex:5;-webkit-flex:5;flex:5;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.handTitle[data-v-6ad55278]{-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#666}.handBtn uni-button[data-v-6ad55278]{font-size:%?28?%}.handBtn[data-v-6ad55278]{height:95vh;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:space-between;align-content:space-between;-webkit-box-flex:1;-webkit-flex:1;flex:1}.delBtn[data-v-6ad55278]{position:absolute;top:%?250?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.delBtn uni-image[data-v-6ad55278]{position:absolute;top:%?13?%;left:%?25?%}.subBtn[data-v-6ad55278]{position:absolute;bottom:%?52?%;left:%?-3?%;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-transform:rotate(90deg);transform:rotate(90deg);background:#008ef6;color:#fff;margin-bottom:%?30?%;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}\n\n/*Peach - 新增 - 保存*/.saveBtn[data-v-6ad55278]{position:absolute;top:%?375?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.previewBtn[data-v-6ad55278]{position:absolute;top:%?500?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.uploadBtn[data-v-6ad55278]{position:absolute;top:%?625?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}\n\n/*Peach - 新增 - 保存*/.black-select[data-v-6ad55278]{width:%?60?%;height:%?60?%;position:absolute;top:%?30?%;left:%?25?%}.black-select.color_select[data-v-6ad55278]{width:%?90?%;height:%?90?%;top:%?100?%;left:%?10?%}.red-select[data-v-6ad55278]{width:%?60?%;height:%?60?%;position:absolute;top:%?140?%;left:%?25?%}.red-select.color_select[data-v-6ad55278]{width:%?90?%;height:%?90?%;top:%?120?%;left:%?10?%}body.?%PAGE?%[data-v-6ad55278]{background:#fbfbfb}",""]),t.exports=e}}]);