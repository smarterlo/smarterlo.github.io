(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-functions-phoneSign-phoneSign"],{"086e":function(t,e,a){"use strict";a.r(e);var n=a("63f7"),i=a("4ecb");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("ee84");var s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"6ad55278",null,!1,n["a"],void 0);e["default"]=c.exports},"4ecb":function(t,e,a){"use strict";a.r(e);var n=a("a9fa"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"63f7":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"handBtn"},[a("v-uni-image",{class:["black"===t.selectColor?"color_select":"","black-select"],attrs:{src:"black"===t.selectColor?"/static/images/phoneSign/color_black_selected.png":"/static/images/phoneSign/color_black.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectColorEvent("black","#1A1A1A")}}}),a("v-uni-image",{class:["red"===t.selectColor?"color_select":"","black-select"],attrs:{src:"red"===t.selectColor?"/static/images/phoneSign/color_red_selected.png":"/static/images/phoneSign/color_red.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectColorEvent("red","#ca262a")}}}),a("v-uni-button",{staticClass:"delBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.retDraw.apply(void 0,arguments)}}},[t._v("重写")]),a("v-uni-button",{staticClass:"saveBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveCanvasAsImg.apply(void 0,arguments)}}},[t._v("保存")]),a("v-uni-button",{staticClass:"previewBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewCanvasImg.apply(void 0,arguments)}}},[t._v("预览")]),a("v-uni-button",{staticClass:"subBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.subCanvas.apply(void 0,arguments)}}},[t._v("完成")])],1),a("v-uni-view",{staticClass:"handCenter"},[a("v-uni-canvas",{staticClass:"handWriting",attrs:{"disable-scroll":!0,"canvas-id":"handWriting"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadScaleStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadScaleMove.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"handRight"},[a("v-uni-view",{staticClass:"handTitle"},[t._v("请签名")])],1)],1)],1)},i=[]},a9fa:function(t,e,a){"use strict";var n;a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("cb29");var i={data:function(){return{canvasName:"handWriting",ctx:"",startX:null,startY:null,canvasWidth:0,canvasHeight:0,selectColor:"black",lineColor:"#1A1A1A",lineSize:5}},onLoad:function(){switch(n=this,n.$store.state.platform){case"android":console.log("运行Android上");break;case"ios":Vue.prototype.requestIosPermission("photoLibrary","相册"),console.log("运行iOS上");break;default:console.log("运行在开发者工具上");break}},onReady:function(){var t=this;this.ctx=uni.createCanvasContext("handWriting"),uni.createSelectorQuery().select(".handCenter").boundingClientRect((function(e){t.canvasWidth=e.width,t.canvasHeight=e.height,t.setCanvasBg("#fff")})).exec()},methods:{uploadScaleStart:function(t){this.startX=t.changedTouches[0].x,this.startY=t.changedTouches[0].y,this.ctx.setStrokeStyle(this.lineColor),this.ctx.setLineWidth(this.lineSize),this.ctx.setLineCap("round"),this.ctx.beginPath()},uploadScaleMove:function(t){var e=t.changedTouches[0].x,a=t.changedTouches[0].y;this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(e,a),this.ctx.stroke(),this.startX=e,this.startY=a,this.ctx.draw(!0)},retDraw:function(){this.ctx.clearRect(0,0,700,730),this.ctx.draw(),this.setCanvasBg("#fff")},selectColorEvent:function(t,e){this.selectColor=t,this.lineColor=e},subCanvas:function(){this.ctx.draw(!0,(function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){uni.showToast({title:"已保存"}),uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){uni.showToast({title:"保存完毕",duration:2e3})}})}})}))},saveCanvasAsImg:function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){console.log(t.tempFilePath,"canvas生成图片地址"),uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){uni.showToast({title:"已保存到相册",duration:2e3})}})}})},previewCanvasImg:function(){uni.canvasToTempFilePath({canvasId:"handWriting",fileType:"jpg",quality:1,success:function(t){uni.previewImage({urls:[t.tempFilePath]})}})},setCanvasBg:function(t){this.ctx.rect(0,0,this.canvasWidth,this.canvasHeight-4),this.ctx.setFillStyle(t),this.ctx.fill(),this.ctx.draw()}}};e.default=i},b5558:function(t,e,a){var n=a("be52");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("4584efd8",n,!0,{sourceMap:!1,shadowMode:!1})},be52:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-6ad55278]{background:#fbfbfb;height:auto;overflow:hidden}body.?%PAGE?%[data-v-6ad55278]{background:#fbfbfb}.wrapper[data-v-6ad55278]{width:100%;height:95vh;margin:%?30?% 0;overflow:hidden;display:flex;align-content:center;flex-direction:row;justify-content:center;font-size:%?28?%}.handWriting[data-v-6ad55278]{background:#fff;width:100%;height:95vh}.handRight[data-v-6ad55278]{display:inline-flex;align-items:center}.handCenter[data-v-6ad55278]{border:%?4?% dashed #e9e9e9;flex:5;overflow:hidden;box-sizing:border-box}.handTitle[data-v-6ad55278]{-webkit-transform:rotate(90deg);transform:rotate(90deg);flex:1;color:#666}.handBtn uni-button[data-v-6ad55278]{font-size:%?28?%}.handBtn[data-v-6ad55278]{height:95vh;display:inline-flex;flex-direction:column;justify-content:space-between;align-content:space-between;flex:1}.delBtn[data-v-6ad55278]{position:absolute;top:%?250?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.delBtn uni-image[data-v-6ad55278]{position:absolute;top:%?13?%;left:%?25?%}.subBtn[data-v-6ad55278]{position:absolute;bottom:%?52?%;left:%?-3?%;display:inline-flex;-webkit-transform:rotate(90deg);transform:rotate(90deg);background:#008ef6;color:#fff;margin-bottom:%?30?%;text-align:center;justify-content:center}\n\n/*Peach - 新增 - 保存*/.saveBtn[data-v-6ad55278]{position:absolute;top:%?375?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.previewBtn[data-v-6ad55278]{position:absolute;top:%?500?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}.uploadBtn[data-v-6ad55278]{position:absolute;top:%?625?%;left:%?0?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);color:#666}\n\n/*Peach - 新增 - 保存*/.black-select[data-v-6ad55278]{width:%?60?%;height:%?60?%;position:absolute;top:%?30?%;left:%?25?%}.black-select.color_select[data-v-6ad55278]{width:%?90?%;height:%?90?%;top:%?100?%;left:%?10?%}.red-select[data-v-6ad55278]{width:%?60?%;height:%?60?%;position:absolute;top:%?140?%;left:%?25?%}.red-select.color_select[data-v-6ad55278]{width:%?90?%;height:%?90?%;top:%?120?%;left:%?10?%}",""]),t.exports=e},cb29:function(t,e,a){"use strict";var n=a("23e7"),i=a("81d5"),o=a("44d2");n({target:"Array",proto:!0},{fill:i}),o("fill")},ee84:function(t,e,a){"use strict";var n=a("b5558"),i=a.n(n);i.a}}]);